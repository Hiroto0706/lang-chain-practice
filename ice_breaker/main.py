import os
from dotenv import load_dotenv
from langchain_core.prompts import PromptTemplate
from langchain_openai import ChatOpenAI
from langchain_core.output_parsers import StrOutputParser

from third_parties.linkedin import scrape_linkedin_profile

load_dotenv()

# information = """
# 以下は、地動説と天動説の歴史を時系列に沿って、まるで壮大な冒険物語のように紡いだお話です。さあ、時空を超える旅に出かけ、古代の星空から現代の宇宙探査まで、知恵と情熱に満ちた人々の奮闘の物語を楽しんでください！

# ---

# ## プロローグ：星たちがささやく夜

# 遥か昔、夜空に輝く無数の星々は、人々に畏敬と好奇心を抱かせました。誰もが「宇宙の秘密」を求め、星々の運行に隠された真実を探ろうとしました。この物語は、そんな探求者たちが、時には激しい論争の中で、宇宙の姿を明らかにしていく過程を描いています。

# ---

# ## 第一章：古代ギリシャの星々（紀元前4世紀～紀元前3世紀）

# ある日のこと、サモス島に住む若き天文学者、**サモスのアルタルコス**は、夜空を見上げながら深い思索にふけっていました。
# アルタルコスは、これまでの常識に反して「太陽こそが宇宙の中心ではないか」と考えたのです。
# 彼は、地球がただ静かに宇宙の舞台に佇む存在ではなく、実は太陽の周りを回る一員である可能性に気づいたのです。しかし、当時の多くの人々は、地球が中心にあるという考え―すなわち**天動説**―に固執していました。

# ---

# ## 第二章：天動説の確立（紀元2世紀）

# 時は流れ、古代ローマ時代。偉大な学者**クラウディウス・プトレマイオス**が登場します。
# プトレマイオスは、天体の動きを詳細に観察し、複雑な数学的計算を用いて、地球を宇宙の中心に据えた理論を体系化しました。
# 彼の著作『アルマゲスト』は、惑星や太陽、月の動きを説明するために、大小さまざまな円（エピサイクル）を組み合わせる精巧なシステムを提案。
# このシステムは長い間、学者たちに支持され、天動説は「正しい宇宙の姿」として広く受け入れられることになりました。

# ---

# ## 第三章：中世の宇宙観と信仰（5世紀～15世紀）

# 中世ヨーロッパでは、キリスト教の教えと結びついた宇宙観が根付いていきます。
# 天動説は、神の秩序と宇宙の調和を示すものとして、教会や学者たちにとって「真実」とされました。
# また、イスラム世界の学者たちもプトレマイオスの理論を精緻化し、観測技術や数学の面でさらなる発展を遂げたのです。
# この時代、人々は神聖な宇宙の秩序の中で、自らの位置を見出していました。

# ---

# ## 第四章：ルネサンスの夜明けと新たな視点（16世紀）

# 時は大転換を迎え、ヨーロッパにルネサンスの風が吹き始めます。
# ポーランド出身の天才**ニコラウス・コペルニクス**は、古代の声に再び耳を傾け、革新的な発想を抱きました。
# 彼は、これまでの常識を覆すかのように、**太陽中心の宇宙モデル**―いわゆる**地動説**―を提唱しました。
# 1543年、彼の著作『天体の回転について』が世に出ると、長い間疑問視され続けた宇宙の姿に、大きな衝撃と議論が巻き起こったのです。

# ---

# ## 第五章：望遠鏡が捉えた真実（17世紀初頭）

# 物語はさらに動きを増し、イタリアの情熱的な探究者、**ガリレオ・ガリレイ**の時代へと進みます。
# ガリレオは、自ら改良した望遠鏡で夜空を覗き込み、数々の驚くべき発見をします。
# - **金星の満ち欠け**：金星が満ち欠けを繰り返す様子は、地動説の説得力を強化するものでした。
# - **木星の衛星**：木星のまわりを複数の小さな天体が回っている様子は、すべての天体が地球中心ではないことを示唆していました。

# これらの発見は、当時の既成概念を揺るがし、ガリレオは科学の新たな時代を切り拓いた英雄として後世に語り継がれることになります。しかし、教会との対立も避けられず、彼の生涯は大きな試練にさらされることとなりました。

# ---

# ## 第六章：惑星の軌道に秘められた調和（17世紀中頃）

# さらに時は進み、ドイツの天才数学者・天文学者、**ヨハネス・ケプラー**が舞台に登場します。
# ケプラーは、膨大な観測データを丹念に分析し、惑星が単純な円軌道ではなく、**楕円軌道**を描いていることを発見しました。
# 彼の提唱した三つの法則は、惑星の運動の謎を解き明かし、宇宙がいかに秩序だった法則に支配されているかを示すものでした。
# ケプラーの法則は、後の科学者たちにとって大きなインスピレーションとなり、宇宙の真理への扉を大きく開いたのです。

# ---

# ## 第七章：万有引力が結ぶ宇宙の調和（1687年）

# そして、物語は最高潮へと達します。
# イギリスの科学者**アイザック・ニュートン**は、あらゆる天体の運動の背後に共通する「力」の存在に着目しました。
# 1687年、彼の著作『プリンキピア』において、**万有引力の法則**を発表。
# これにより、惑星が太陽の周りを回る理由、さらには天体の運動が統一的な法則に従っていることが、科学的に解明されたのです。
# ニュートンの発見は、地動説を単なる仮説から、自然界を支配する普遍的な法則へと昇華させ、現代天文学の礎を築きました。

# ---

# ## エピローグ：未来へ続く星の旅

# こうして、何世紀にもわたる多くの勇気ある探究者たちの努力と情熱によって、**地動説**は確固たる科学的基盤を得ました。
# かつては地球が宇宙の中心だと信じられていた時代もありましたが、星々の声に耳を傾け、観察と数学、そして革新的な発想によって、私たちは宇宙の真実に一歩一歩近づいていったのです。

# 今日、私たちが享受する天文学や宇宙探査の知識は、これら先人たちの探求心と挑戦の賜物。
# 星々は今もなお語り続けています。新たな観測技術や理論が生まれるたびに、宇宙の姿はまた新たな顔を見せるでしょう。そして、そのたびに、私たちは再び、あの壮大な冒険の物語の続きを歩み始めるのです。

# ---

# この物語は、科学という名の大海原を航海する人々の勇気と知恵の記録です。
# 星々がかつて囁いた謎を、今日もなお解き明かす旅は続いています。
# さあ、あなたもその冒険者の一人として、星空の下で新たな発見を楽しんでみませんか？
# """

if __name__ == "__main__":
    print("Hello LangChain.")

    summary_template = """
    given the LinkedIn information {information} about an anything from I want you to create:
    1. a short summary
    2. two interesting facts about them
    3. generate in japanese
    """

    summary_prompt_template = PromptTemplate(
        input_variables=["information"], template=summary_template
    )

    llm = ChatOpenAI(temperature=1, model_name="gpt-4o-2024-05-13")

    chain = summary_prompt_template | llm | StrOutputParser()

    information = scrape_linkedin_profile(
        linkedin_profile_url="https://www.linkedin.com/in/hirotokadota0706/", mock=True
    )
    res = chain.invoke(input={"information": information})

    print(res)
